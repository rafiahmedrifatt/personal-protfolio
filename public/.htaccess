# Enable GZIP compression

<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# Enable browser caching

<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  ExpiresByType text/javascript "access plus 1 month"
  ExpiresByType application/x-javascript "access plus 1 month"
  ExpiresByType text/html "access plus 1 week"
  ExpiresByType application/json "access plus 0 days"
  ExpiresByType application/xml "access plus 0 days"
</IfModule>

# Set ETag

FileETag INode MTime Size

# Disable ETags (optional)

# Header unset ETag

# Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"

# Header set Pragma "no-cache"

# Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"

# Security headers

<IfModule mod_headers.c>
  Header set X-Content-Type-Options "nosniff"
  Header set X-Frame-Options "SAMEORIGIN"
  Header set X-XSS-Protection "1; mode=block"
  Header set Referrer-Policy "strict-origin-when-cross-origin"
  Header set Permissions-Policy "geolocation=(), microphone=(), camera=()"
</IfModule>

# Remove ETags and set strong caching for static assets

<FilesMatch "\\.(js|css|woff|woff2|ttf|eot|svg|png|jpg|jpeg|gif|ico)$">
Header set Cache-Control "public, max-age=31536000, immutable"
Header unset ETag
FileETag None
</FilesMatch>

# Set no-cache for HTML

<FilesMatch "\\.html$">
Header set Cache-Control "public, max-age=3600, must-revalidate"
</FilesMatch>

# Redirect trailing slash

RewriteEngine On
RewriteBase /
RewriteRule ^index\.html$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]

# Disable directory listing

Options -Indexes
